<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="./assets/style.css" rel="stylesheet">
  <style>
    .stars {
      font-size: 2rem;
      color: gold;
    }

    .card:hover {
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }
  </style>

</head>

<body>
  <!-- Header will be loaded here -->
  <div id="header"></div>
  <section class="bg-light py-3 py-md-5">
    <div class="container">
      <a href="dashboard.html" class="btn btn-outline-success mb-3">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left"
          viewBox="0 0 16 16">
          <path fill-rule="evenodd"
            d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8" />
        </svg> View All</a>
      <div id="card-container" class="d-flex flex-wrap gap-3"></div>
    </div>
  </section>
  <!-- Footer will be loaded here -->
  <div id="footer"></div>
  <script>
    const data = {
      "categories": [
        {
          "id": 1,
          "name": "Margherita Pizza",
          "description": "Classic delight with 100% real mozzarella cheese",
          "price": 8.99,
          "image": "margherita.jpeg",
          "category": "Pizza",
          "availability": true,
          "rating": 4.5,
          "tags": ["vegetarian", "cheese"]
        },
        {
          "id": 2,
          "name": "Pepperoni Pizza",
          "description": "Pepperoni, mozzarella, tomato sauce",
          "price": 10.99,
          "image": "pepperoni.jpeg",
          "category": "Pizza",
          "availability": true,
          "rating": 4.6,
          "tags": ["meat", "spicy"]
        },
        {
          "id": 3,
          "name": "Chicken Burger",
          "description": "Grilled chicken with lettuce and mayo",
          "price": 6.49,
          "image": "chicken_burger.webp",
          "category": "Burgers",
          "availability": true,
          "rating": 4.3,
          "tags": ["chicken"]
        },
        {
          "id": 4,
          "name": "Veggie Burger",
          "description": "Patty made from chickpeas, beans and vegetables",
          "price": 5.99,
          "image": "veggie_burger.jpeg",
          "category": "Burgers",
          "availability": false,
          "rating": 4.0,
          "tags": ["vegetarian"]
        },
        {
          "id": 5,
          "name": "French Fries",
          "description": "Crispy potato fries with ketchup",
          "price": 2.99,
          "image": "fries.jpeg",
          "category": "Sides",
          "availability": true,
          "rating": 4.2,
          "tags": ["vegetarian", "sides"]
        },
        {
          "id": 6,
          "name": "Onion Rings",
          "description": "Golden fried onion rings with dip",
          "price": 3.99,
          "image": "onion_rings.jpg",
          "category": "Sides",
          "availability": true,
          "rating": 4.1,
          "tags": ["vegetarian"]
        },
        {
          "id": 7,
          "name": "Tandoori Chicken",
          "description": "Spicy grilled chicken marinated in Indian spices",
          "price": 12.99,
          "image": "tandoori_chicken.webp",
          "category": "Main Course",
          "availability": true,
          "rating": 4.7,
          "tags": ["spicy", "indian"]
        },
        {
          "id": 8,
          "name": "Butter Chicken",
          "description": "Creamy tomato-based curry with chicken",
          "price": 11.99,
          "image": "butter_chicken.jpeg",
          "category": "Main Course",
          "availability": true,
          "rating": 4.8,
          "tags": ["indian", "rich"]
        },
        {
          "id": 9,
          "name": "Paneer Tikka",
          "description": "Marinated cottage cheese grilled with spices",
          "price": 9.49,
          "image": "paneer_tikka.jpeg",
          "category": "Main Course",
          "availability": true,
          "rating": 4.4,
          "tags": ["vegetarian", "grilled"]
        },
        {
          "id": 10,
          "name": "Caesar Salad",
          "description": "Romaine lettuce, croutons and Caesar dressing",
          "price": 5.99,
          "image": "caesar_salad.jpeg",
          "category": "Salads",
          "availability": true,
          "rating": 4.0,
          "tags": ["healthy"]
        },
        {
          "id": 11,
          "name": "Greek Salad",
          "description": "Tomatoes, cucumbers, feta, olives and olive oil",
          "price": 6.49,
          "image": "greek_salad.jpeg",
          "category": "Salads",
          "availability": true,
          "rating": 4.3,
          "tags": ["healthy", "vegetarian"]
        },
        {
          "id": 12,
          "name": "Tomato Soup",
          "description": "Creamy tomato soup with croutons",
          "price": 4.99,
          "image": "tomato_soup.jpeg",
          "category": "Soups",
          "availability": true,
          "rating": 4.1,
          "tags": ["vegetarian", "warm"]
        },
        {
          "id": 13,
          "name": "Chicken Noodle Soup",
          "description": "Hearty soup with chicken, noodles and vegetables",
          "price": 5.49,
          "image": "chicken_soup.jpeg",
          "category": "Soups",
          "availability": true,
          "rating": 4.4,
          "tags": ["comfort", "non-vegetarian"]
        },
        {
          "id": 14,
          "name": "Chocolate Milkshake",
          "description": "Thick and creamy chocolate milkshake",
          "price": 4.49,
          "image": "chocolate_milkshake.jpeg",
          "category": "Beverages",
          "availability": true,
          "rating": 4.7,
          "tags": ["dessert", "drink"]
        },
        {
          "id": 15,
          "name": "Mango Smoothie",
          "description": "Fresh mango blended with yogurt and ice",
          "price": 4.99,
          "image": "mango_smoothie.jpeg",
          "category": "Beverages",
          "availability": true,
          "rating": 4.6,
          "tags": ["fruit", "healthy"]
        },
        {
          "id": 16,
          "name": "Iced Coffee",
          "description": "Cold brew coffee with milk and ice",
          "price": 3.99,
          "image": "iced_coffee.png",
          "category": "Beverages",
          "availability": true,
          "rating": 4.2,
          "tags": ["caffeine", "drink"]
        },
        {
          "id": 17,
          "name": "Gulab Jamun",
          "description": "Soft fried dough balls soaked in rose syrup",
          "price": 3.49,
          "image": "gulab_jamun.jpeg",
          "category": "Desserts",
          "availability": true,
          "rating": 4.9,
          "tags": ["sweet", "indian"]
        },
        {
          "id": 18,
          "name": "Chocolate Brownie",
          "description": "Rich chocolate brownie served with chocolate sauce",
          "price": 4.25,
          "image": "chocolate_brownie.jpeg",
          "category": "Desserts",
          "availability": true,
          "rating": 4.8,
          "tags": ["dessert", "chocolate"]
        },
        {
          "id": 19,
          "name": "Ice Cream Sundae",
          "description": "Vanilla ice cream topped with chocolate syrup and nuts",
          "price": 3.99,
          "image": "ice_cream_sundae.webp",
          "category": "Desserts",
          "availability": true,
          "rating": 4.5,
          "tags": ["dessert", "cold"]
        },
        {
          "id": 20,
          "name": "Masala Dosa",
          "description": "South Indian rice crepe filled with spiced potatoes",
          "price": 7.49,
          "image": "masala_dosea.jpg",
          "category": "Indian",
          "availability": true,
          "rating": 4.6,
          "tags": ["vegetarian", "south-indian"]
        }
      ]
    };

    const container = document.getElementById('card-container');

    const category = data.categories.filter(cat => cat.category === sessionStorage.getItem('category'));

    if (Array.isArray(category) && category.length > 0) {
      category.forEach(item => {
        const cardHTML = `
      <div class="card" style="width: 18rem;">
        <img src="./assets/img/${item.image}" class="card-img-top" width="150" height="150" alt="${item.name}">
        <div class="card-body">
          <h5 class="card-title">${item.name}</h5>
          <p class="card-text">${item.description}</p>
          <p class="card-text"><i class="fa fa-inr"></i> ${item.price}</p>
          <p class="card-text stars">${renderStars(item.rating)}</p>
          <a href="#" data-id="${item.id}" class="${item.availability ? 'btn btn-primary add-to-cart' : 'btn btn-danger disabled'}">${item.availability ? 'Add to Cart' : 'Out of Stock'}</a>
        </div>
      </div>
    `;
        container.innerHTML += cardHTML;
      });
    } else {
      container.innerHTML = `<p>No items found in this category.</p>`;
    }


    function renderStars(rating, maxStars = 5) {
      const fullStar = '★';
      const halfStar = '⯨'; // Unicode half-star alternative: '☆' or use an SVG for better style
      const emptyStar = '☆';

      let stars = '';
      for (let i = 1; i <= maxStars; i++) {
        if (rating >= i) {
          stars += fullStar;
        } else if (rating >= i - 0.5) {
          stars += halfStar;
        } else {
          stars += emptyStar;
        }
      }
      return stars;
    }

    // Initialize cart from localStorage
    function loadCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      document.getElementById('cart-count').textContent = cart.length;
    }

    // Add item to cart and update localStorage
    document.addEventListener('click', function (e) {
      if (e.target && e.target.classList.contains('add-to-cart')) {
        e.preventDefault();

        const itemId = e.target.getAttribute('data-id');
        const selectedItem = category.find(item => item.id == itemId);

        if (selectedItem) {
          // Optional: check if item is already in the cart
          const cart = JSON.parse(localStorage.getItem('cart')) || [];
          cart.push({ ...selectedItem, quantity: 1 });
          localStorage.setItem('cart', JSON.stringify(cart));
          loadCartCount();
        }
      }
    });

    // Load cart count on page load
    window.onload = loadCartCount;
  </script>
  <script src="./assets/script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO"
    crossorigin="anonymous"></script>
</body>

</html>